name: TrollTouch
options:
  bundleIdPrefix: com.trolltouch
  deploymentTarget:
    iOS: 14.0
  xcodeVersion: 13.0

targets:
  TrollTouch:
    type: application
    platform: iOS
    sources:
      - TrollTouch/main.m
      - TrollTouch/AppDelegate.m
      - TrollTouch/AppDelegate.h
      - TrollTouch/RootViewController.m
      - TrollTouch/RootViewController.h
      - TrollTouch/XCTestRunner.m
      - TrollTouch/XCTestRunner.h
      - TrollTouch/ScheduleManager.m
      - TrollTouch/ScheduleManager.h
      - TrollTouch/AutomationManager.m
      - TrollTouch/AutomationManager.h
      - TrollTouch/GSEventHelper.m
      - TrollTouch/GSEventHelper.h
      - TrollTouch/ScreenCapture.m
      - TrollTouch/ScreenCapture.h
      - TrollTouch/VisionHelper.m
      - TrollTouch/VisionHelper.h
      - TrollTouch/TouchSimulator.m
      - TrollTouch/TouchSimulator.h
      - TrollTouch/TouchTestViewController.m
      - TrollTouch/TouchTestViewController.h
      - TrollTouch/AutomationClient.h
      - TrollTouch/AutomationClient.m
      - TrollTouch/BundleLoader.h
      - TrollTouch/BundleLoader.m
      - TrollTouch/GSEvent.h
      - TrollTouch/Info.plist
    dependencies:
      # ğŸ”§ åµŒå…¥XCTest bundleåˆ°PlugInsç›®å½•
      - target: TrollTouchUITests
        embed: true
    settings:
      PRODUCT_NAME: TrollTouch
      PRODUCT_BUNDLE_IDENTIFIER: com.trolltouch.app
      INFOPLIST_FILE: TrollTouch/Info.plist
      IPHONEOS_DEPLOYMENT_TARGET: 14.0
      TARGETED_DEVICE_FAMILY: "1,2" # iPhone and iPad
      ENABLE_BITCODE: NO
      # å…³é—­ä»£ç ç­¾å
      CODE_SIGNING_ALLOWED: NO
      CODE_SIGN_IDENTITY: ""
      # é“¾æ¥å¿…è¦çš„ç³»ç»Ÿåº“
      OTHER_LDFLAGS: 
        - "-framework"
        - "UIKit"
        - "-framework"
        - "Foundation"
        - "-framework"
        - "CoreGraphics"
        - "-framework"
        - "Vision"
        - "-framework"
        - "AVFoundation"
        - "-framework"
        - "UserNotifications"

  TrollTouchUITests:
    type: bundle
    platform: iOS
    sources:
      - TrollTouchUITests/TrollTouchUITests.m
      - TrollTouchUITests/Info.plist
      - TrollTouchUITests/XCPointerEventPath.h
      - TrollTouchUITests/WDATouchInjector.h
      - TrollTouchUITests/WDATouchInjector.m
      - TrollTouchUITests/AutomationServer.h
      - TrollTouchUITests/AutomationServer.m
    dependencies:
      # ğŸ”§ æ·»åŠ XCTestæ¡†æ¶é“¾æ¥
      - framework: XCTest.framework
        embed: false
    settings:
      PRODUCT_BUNDLE_IDENTIFIER: com.trolltouch.app.uitests
      INFOPLIST_FILE: TrollTouchUITests/Info.plist
      PRODUCT_NAME: TrollTouchUITests
      # ğŸ”§ è®¾ç½®ä¸ºxctestæ‰©å±•å
      WRAPPER_EXTENSION: xctest
      IPHONEOS_DEPLOYMENT_TARGET: 14.0
      # å…³é—­ä»£ç ç­¾åï¼ˆGitHub Actionsä½¿ç”¨ldidæ‰‹åŠ¨ç­¾åï¼‰
      CODE_SIGNING_ALLOWED: NO
      CODE_SIGN_IDENTITY: ""
      CODE_SIGN_ENTITLEMENTS: ""
      # å…³é—­ä¸€äº›ä¸¥æ ¼çš„æ£€æŸ¥ï¼Œæ–¹ä¾¿æ—§ä»£ç ç¼–è¯‘
      CLANG_ENABLE_MODULES: YES
      # ç¡®ä¿é“¾æ¥XCTestæ¡†æ¶
      OTHER_LDFLAGS:
        - "-framework"
        - "XCTest"
        - "-framework"
        - "Foundation"
        - "-framework"
        - "UIKit"
        - "-framework"
        - "CoreGraphics"
        - "-framework"
        - "CoreGraphics"
